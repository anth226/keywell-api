# import * from 'schema.graphql'
# import * from 'diagnosis.graphql'
# import * from 'child-medication.graphql'
# import * from 'tag.graphql'

type Child {
    id: ID!

    name: String!
    age: Int

    """
    Registered diagnoses.
    """
    diagnoses: [Diagnosis!]

    """
    Medications or supplements a child
    takes on a regular basis.
    """
    medications: [ChildMedication!]

    """
    Sleep schedule for the child.
    Can be of size 1 or 2.
    Only 1 item means the whole week schedule.
    2 items means separate schedule for weekdays,
    and weekends.
    """
    sleepSchedule: [SleepSchedule!]
}

type Query {

    """
    Query all registered children.
    """
    children(sortBy: ChildrenSortInput): [Child!]!

    """
    Query child by id.
    """
    child(id: ID!): Child

}

type Mutation {
    child: ChildMutations
}

type ChildMutations {
    add(input: ChildInput!): ChildProfilePayload
    edit(id: ID!, input: ChildInput!): ChildProfilePayload
    delete(id: ID!): DeleteChildPayload
    diagnosis: ChildDiagnosisMutations
    medication: ChildMedicationMutations
    sleep: ChildSleepMutations
    behavior: ChildBehaviorMutations
    activity: ChildActivityMutations
    therapy: ChildTherapyMutations
}

type ChildDiagnosisMutations {
    add(childId: ID!, diagnosisId: ID!): AddChildDiagnosisPayload
    remove(childId: ID!, diagnosisId: ID!): RemoveChildDiagnosisPayload
}

type AddChildDiagnosisPayload {
    id: ID!
    added: Boolean!
}

type RemoveChildDiagnosisPayload {
    id: ID!
    removed: Boolean!
}

input ChildrenSortInput {
    createdAt: SortDirection
}

input BehaviorRecordInput {
    """
    Use defaults if omitted
    """
    info: TrackedEventInfo

    """
    taken from BehaviorTag.name
    """
    tags: [String!]!
}

type BehaviorRecord implements TrackedEvent {
    id: ID!
    tracked: DateTime!
    date: Date!
    time: TimeOfDay!
    notes: String
    tags: [Tag!]!
    reaction: ParentReaction
}

input ParentReactionInput {

    """
    taken from parentReacitons.tag
    """
    tags: [String!]!

    """
    taken from parentReactionFeelings
    """
    feeling: String
}

type ParentReaction {
    tags: [Tag!]!
    feeling: Tag
}

input ActivityRecordInput {
    """
    Use defaults if omitted
    """
    info: TrackedEventInfo

    tags: [String!]!
}

type ActivityRecord implements TrackedEvent {
    id: ID!
    tracked: DateTime!
    date: Date!
    time: TimeOfDay!
    notes: String
    tags: [Tag!]!
}

type BehaviorRecordPayload {
    id: ID!
    behavior: BehaviorRecord!
}

type DeleteBehaviorRecordPayload {
    """
    Deleted record ID.
    """
    id: ID!
    deleted: Boolean!
}

type ParentReactionPayload {
    """
    Behavior record ID.
    """
    id: ID!
    reaction: ParentReaction!
}

type ChildBehaviorMutations {
    track(childId: ID!, behavior: BehaviorRecordInput!): BehaviorRecordPayload
    edit(id: ID!, behavior: BehaviorRecordInput!): BehaviorRecordPayload
    delete(id: ID!): DeleteBehaviorRecordPayload
    trackReaction(trackedBehaviorId: ID!, reaction: ParentReactionInput!): ParentReactionPayload
}
